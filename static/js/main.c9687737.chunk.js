(this["webpackJsonpmemory-cards"]=this["webpackJsonpmemory-cards"]||[]).push([[0],{102:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return u}));var n=a(4),c=a(29),r=a(2),l={success:null},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RESULT":return Object(n.a)(Object(n.a)({},e),{},{success:t.payload});default:return e}},i=function(e){return{type:"SET_RESULT",payload:e}},u=function(e,t){return function(a){a(Object(r.b)(!0)),c.a.sendNewPassword({password:e,resetPasswordToken:t}).then((function(e){200===e.status?a(i(!0)):(a(i(!1)),a(Object(r.a)("Oops...Something went wrong. Please try again later")))})).catch((function(e){a(i(!1)),a(Object(r.a)(e.message))})).finally((function(){a(Object(r.b)(!1))}))}}},103:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i}));var n=a(4),c=a(29),r=a(2),l={selectedEmail:"",success:!1},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONFIRMING":return Object(n.a)(Object(n.a)({},e),{},{success:t.payload});case"SET_SELECTED_EMAIL":return Object(n.a)(Object(n.a)({},e),{},{selectedEmail:t.payload});default:return e}},i=function(e){return function(t){t(Object(r.b)(!0)),c.a.forgot({email:e,from:"<".concat(e,">"),message:"\n         <div style=\"background-color: lime; padding: 15px\">\t\n            password recovery link:\n            <a href='http://localhost:3000/memory-cards#/set-new-password/$token$'>\n            link</a>\n         </div>\n      "}).then((function(a){a.data.success?(t({type:"SET_CONFIRMING",payload:a.data.success}),t(function(e){return{type:"SET_SELECTED_EMAIL",payload:e}}(e))):a.data.success&&t(Object(r.a)("Oops...Something went wrong. Please try again later"))})).catch((function(e){t(Object(r.a)(e.message))})).finally((function(){t(Object(r.b)(!1))}))}}},104:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i}));var n=a(4),c=a(29),r=a(2),l={isRegistered:!1},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTRATION":return Object(n.a)(Object(n.a)({},e),{},{isRegistered:t.payload});default:return e}},i=function(e){return function(t){t(Object(r.b)(!0)),c.a.registration(e).then((function(e){t(Object(r.b)(!1)),201===e.status?t({type:"REGISTRATION",payload:!0}):t(Object(r.a)("Oops...Something went wrong. Please try again later"))})).catch((function(e){t(Object(r.a)(e.message)),t(Object(r.b)(!1))}))}}},110:function(e,t,a){e.exports={btn:"Button_btn__nA1Ui"}},112:function(e,t,a){e.exports=a.p+"static/media/loader.aa8b6d13.svg"},115:function(e,t,a){e.exports=a(145)},120:function(e,t,a){},121:function(e,t,a){},145:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(70),l=a.n(r),o=(a(120),a(121),a(8)),i=a(5),u=a(61),s=a.n(u),m=a(12),d=a(7),b=a(4),f=a(29),E=a(2),p={isLoggedIn:!1,profile:{}},g=function(e){return{type:"LOGIN",value:e}},h=function(e){return{type:"AUTH_ME",success:e}},v=function(){return function(e){e(Object(E.b)(!0)),f.a.authMe().then((function(t){e(Object(E.b)(!1)),e(h(!0))})).catch((function(t){e(Object(E.b)(!1))}))}},_=a(91),O=a(64),j=a(15),w=a(69),k=function(){return w.a({email:w.b().email("Invalid email address").required("Required"),password:w.b().required("Required").min(8,"Must be 8 characters or less")})},N=c.a.memo((function(){var e=Object(d.c)((function(e){return e.login.isLoggedIn})),t=Object(d.c)((function(e){return e.request.error})),a=Object(d.b)(),n=Object(_.a)({initialValues:{email:"",password:"",rememberMe:!1},validationSchema:k,onSubmit:function(e){var t;a((t=e,function(e){e(Object(E.b)(!0)),f.a.login(t).then((function(t){e(Object(E.b)(!1)),200===t.status?(e(g(!0)),e({type:"GET_USER_DATA",profile:t.data})):(e(Object(E.a)("Oops...Something went wrong. Please try again later")),e(g(!1)))})).catch((function(t){e(Object(E.b)(!1))}))}))}});return e?c.a.createElement(o.a,{to:i.e}):c.a.createElement("div",{className:s.a.container},c.a.createElement("h1",null,"Login"),c.a.createElement("form",{onSubmit:n.handleSubmit},t&&c.a.createElement("p",null,c.a.createElement("strong",null,t)),c.a.createElement("div",{className:s.a.formItem},c.a.createElement(O.a,Object.assign({labelTitle:"Email",error:n.errors.email},n.getFieldProps("email")))),c.a.createElement("div",{className:s.a.formItem},c.a.createElement(O.a,Object.assign({type:"password",labelTitle:"Password",error:n.errors.password},n.getFieldProps("password")))),c.a.createElement("div",{className:s.a.formItem},c.a.createElement("label",{htmlFor:"password"},"remember me"),c.a.createElement("input",Object.assign({type:"checkbox"},n.getFieldProps("rememberMe")))),c.a.createElement(j.a,{type:"submit",labelTitle:"Send"})),c.a.createElement("div",{className:s.a.subLinks},c.a.createElement(m.c,{to:i.g},"Forgot Password?"),c.a.createElement(m.c,{to:i.f},"Registration")))})),y=c.a.memo((function(){var e=Object(d.c)((function(e){return e.login.profile})),t=Object(d.c)((function(e){return e.login.isLoggedIn})),a=Object(d.b)();return t?c.a.createElement("div",null,c.a.createElement("h1",null,"Profile"),c.a.createElement("h3",null,"name: ",e.name),c.a.createElement("p",null,"email: ",e.email),c.a.createElement("p",null,"publicCardPacksCount: ",e.publicCardPacksCount),c.a.createElement("p",null,c.a.createElement("u",null,c.a.createElement(m.b,{to:i.d},"See my card packs"))),c.a.createElement("div",null,c.a.createElement("img",{src:e.avatar,alt:e.name,width:200})),c.a.createElement(j.a,{onClick:function(){a((function(e){e(Object(E.b)(!0)),f.a.logout().then((function(t){e(Object(E.b)(!1)),e(h(!1))})).catch((function(t){e(Object(E.b)(!1))}))})),a(g(!1))},labelTitle:"LogOut"})):c.a.createElement(o.a,{to:i.b})})),C=a(89),S=a.n(C),T=a(80),P=a(18),R=a.n(P),I=c.a.memo((function(){c.a.useEffect((function(){document.body.addEventListener("click",l)}));var e=c.a.useState(!1),t=Object(T.a)(e,2),a=t[0],n=t[1],r=c.a.useRef(null),l=function(e){(e.path||e.composedPath&&e.composedPath()).includes(r.current)||n(!1)},o=function(){return n(!1)};return c.a.createElement("div",{className:R.a.menu,ref:r},c.a.createElement("div",{className:R.a.menuTitle},"Menu"),c.a.createElement("div",{className:"".concat(R.a.switch," ").concat(a?R.a.active:""),onClick:function(){return n((function(e){return!e}))}},c.a.createElement("div",{className:R.a.switchLine}),c.a.createElement("div",{className:R.a.switchLine}),c.a.createElement("div",{className:R.a.switchLine})),c.a.createElement("nav",{className:R.a.navbar},c.a.createElement(m.c,{to:i.b,activeClassName:R.a.activeLink,onClick:o},"login"),c.a.createElement(m.c,{to:i.e,activeClassName:R.a.activeLink,onClick:o},"profile"),c.a.createElement(m.c,{to:i.d,activeClassName:R.a.activeLink,onClick:o},"card packs"),c.a.createElement(m.c,{to:i.f,activeClassName:R.a.activeLink,onClick:o},"registration"),c.a.createElement(m.c,{to:i.g,activeClassName:R.a.activeLink,onClick:o},"restore password")))})),L=c.a.memo((function(){return c.a.createElement("header",{className:S.a.header},c.a.createElement("div",{className:S.a.container},c.a.createElement("div",null,"Logo"),c.a.createElement(I,null)))})),x=a(17),A=function(e){return x.a.get("cards/card?cardsPack_id=".concat(e,"&pageCount=20"))},M={getCards:[],cardsTotalCount:0,maxGrade:0,minGrade:0,page:0,pageCount:0},F=a(62),U=a.n(F),q=function(){var e=Object(d.c)((function(e){return e.cards.getCards})),t=Object(o.g)().cardId,a=Object(d.b)();return Object(n.useEffect)((function(){var e;a((e=t,function(t){t(Object(E.b)(!0)),A(e).then((function(e){t(Object(E.b)(!1)),t({type:"SET_CARDS",getCards:e.data.getCards})})).catch((function(e){t(Object(E.b)(!1))}))}))}),[]),c.a.createElement("div",{className:U.a.container},c.a.createElement("h1",null,"Cards"),c.a.createElement(m.b,{to:i.d},c.a.createElement(j.a,{labelTitle:"Back to Packs"})),c.a.createElement("div",{className:U.a.table},c.a.createElement("div",{className:"".concat(U.a.tableHeader," ").concat(U.a.tableRow)},c.a.createElement("div",null,c.a.createElement("strong",null,"Question")),c.a.createElement("div",null,c.a.createElement("strong",null,"Answer")),c.a.createElement("div",null,c.a.createElement("strong",null,"Actions"))),e&&e.map((function(e){return c.a.createElement("div",{key:e._id,className:U.a.tableRow},c.a.createElement("div",null,e.question),c.a.createElement("div",null,e.answer),c.a.createElement("div",null,c.a.createElement(j.a,{labelTitle:"Edit"}),c.a.createElement(j.a,{labelTitle:"Delete"})))}))))},G=a(114),D=function(e){return x.a.get("cards/pack?user_id=".concat(e,"&pageCount=20"))},H=function(e){return x.a.post("cards/pack",{cardsPack:{name:e}})},K=function(e){return x.a.delete("cards/pack?id=".concat(e))},Q={cardPacks:[],cardPacksTotalCount:0,maxCardsCount:0,minCardsCount:0,page:0,pageCount:0,token:"",tokenDeathTime:0},z=function(e){return function(t){t(Object(E.b)(!0)),D(e).then((function(e){t(Object(E.b)(!1)),t({type:"SET_PACKS",cardPacks:e.data.cardPacks})})).catch((function(e){t(Object(E.b)(!1))}))}},B=a(63),J=a.n(B),V=a(90),X=a.n(V),W=a(112),$=a.n(W),Y=c.a.memo((function(){return c.a.createElement("div",{className:X.a.wrapper},c.a.createElement("img",{src:$.a,className:X.a.img,alt:"loader"}))})),Z=function(){var e=Object(d.c)((function(e){return e.request.isFetching})),t=Object(d.c)((function(e){return e.login.isLoggedIn})),a=Object(d.c)((function(e){return e.packs.cardPacks})),r=Object(d.c)((function(e){return e.login.profile._id})),l=Object(d.b)();Object(n.useEffect)((function(){l(z(r)),l(v())}),[t]);var u=function(e){l(function(e){return function(t){t(Object(E.b)(!0)),K(e).then((function(a){t(Object(E.b)(!1)),t(function(e){return{type:"REMOVE_PACK",_id:e}}(e))})).catch((function(e){t(Object(E.b)(!1))}))}}(e)),l(z(r))},s=function(e){l(function(e){return function(t){t(Object(E.b)(!0)),H(e).then((function(e){t(Object(E.b)(!1))})).catch((function(e){t(Object(E.b)(!1))}))}}(e)),l(z(r))};return t?c.a.createElement("div",{className:J.a.container},e&&c.a.createElement(Y,null),c.a.createElement("h1",null,"Packs "),c.a.createElement(j.a,{labelTitle:"Add new Pack",onClick:function(){return s("New super pack")}}),c.a.createElement("div",{className:J.a.table},c.a.createElement("div",{className:"".concat(J.a.tableHeader," ").concat(J.a.tableRow)},c.a.createElement("div",null,c.a.createElement("strong",null,"Name")),c.a.createElement("div",null,c.a.createElement("strong",null,"Show pack cards")),c.a.createElement("div",null,c.a.createElement("strong",null,"Actions"))),a.map((function(e){return c.a.createElement("div",{key:e._id,className:J.a.tableRow},c.a.createElement("div",null,e.name),c.a.createElement("div",null,c.a.createElement(m.b,{to:"/cards/".concat(e._id)},"Show cards")),c.a.createElement("div",null,c.a.createElement(j.a,{labelTitle:"Edit"}),c.a.createElement(j.a,{labelTitle:"Delete",onClick:function(){return u(e._id)}})))})))):c.a.createElement(o.a,{to:i.b})},ee=a(57),te=a(67),ae=a.n(te),ne=(c.a.memo((function(e){var t=e.labelTitle,a=Object(ee.a)(e,["labelTitle"]);return c.a.createElement("label",{className:ae.a.label},t&&c.a.createElement("span",{className:ae.a.label},t),c.a.createElement("input",Object.assign({},a,{type:"checkbox",className:ae.a.checkbox})),c.a.createElement("div",{className:ae.a.customCheckbox}))})),a(46),c.a.lazy((function(){return a.e(5).then(a.bind(null,150))}))),ce=c.a.lazy((function(){return a.e(6).then(a.bind(null,151))})),re=c.a.lazy((function(){return a.e(3).then(a.bind(null,152))})),le=c.a.lazy((function(){return a.e(4).then(a.bind(null,153))}));var oe=function(){var e=Object(d.c)((function(e){return e.login.isLoggedIn})),t=Object(d.c)((function(e){return e.request.isFetching})),a=Object(d.b)();return c.a.useEffect((function(){a(v())}),[]),c.a.createElement("div",{className:"App"},t&&c.a.createElement(Y,null),c.a.createElement(L,null),c.a.createElement("div",{className:"content"},c.a.createElement(n.Suspense,{fallback:c.a.createElement(Y,null)},c.a.createElement(o.d,null,c.a.createElement(o.b,{exact:!0,path:"/",render:function(){return e?c.a.createElement(y,null):c.a.createElement(N,null)}}),c.a.createElement(o.b,{path:i.b,render:function(){return c.a.createElement(N,null)}}),c.a.createElement(o.b,{path:i.e,render:function(){return c.a.createElement(y,null)}}),c.a.createElement(o.b,{path:i.d,render:function(){return c.a.createElement(Z,null)}}),c.a.createElement(o.b,{path:i.a,render:function(){return c.a.createElement(q,null)}}),c.a.createElement(o.b,{path:i.f,render:function(){return c.a.createElement(ne,null)}}),c.a.createElement(o.b,{path:i.g,render:function(){return c.a.createElement(ce,null)}}),c.a.createElement(o.b,{path:i.c,render:function(){return c.a.createElement(re,null)}}),c.a.createElement(o.b,{component:le})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie=a(59),ue=a(113),se=a(102),me=a(103),de=a(104),be=Object(ie.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(b.a)(Object(b.a)({},e),{},{isLoggedIn:t.value});case"GET_USER_DATA":return Object(b.a)(Object(b.a)({},e),{},{profile:t.profile});case"AUTH_ME":return Object(b.a)(Object(b.a)({},e),{},{isLoggedIn:t.success});default:return e}},newPsw:se.a,restorePsw:me.b,registration:de.a,request:E.c,packs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PACKS":return Object(b.a)(Object(b.a)({},e),{},{cardPacks:t.cardPacks});case"REMOVE_PACK":return Object(b.a)(Object(b.a)({},e),{},{cardPacks:e.cardPacks.filter((function(e){return e._id!=t._id}))});case"ADD_PACK":return Object(b.a)(Object(b.a)({},e),{},{cardPacks:[t.newPack].concat(Object(G.a)(e.cardPacks))});default:return e}},cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CARDS":return Object(b.a)(Object(b.a)({},e),{},{getCards:t.getCards});default:return e}}}),fe=Object(ie.d)(be,Object(ie.a)(ue.a));window.store=fe,l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(d.a,{store:fe},c.a.createElement(m.a,null,c.a.createElement(oe,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},15:function(e,t,a){"use strict";var n=a(57),c=a(0),r=a.n(c),l=a(110),o=a.n(l);t.a=r.a.memo((function(e){e.labelTitle;var t=Object(n.a)(e,["labelTitle"]);return r.a.createElement("button",Object.assign({className:o.a.btn},t)," ",e.labelTitle)}))},17:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(106),c=a.n(n).a.create({baseURL:"http://localhost:7542/2.0/",withCredentials:!0})},18:function(e,t,a){e.exports={menu:"Navbar_menu__Mhcmp",menuTitle:"Navbar_menuTitle__19_Im",switch:"Navbar_switch__1pOjJ",active:"Navbar_active__1XbSl",navbar:"Navbar_navbar__3Queb",activeLink:"Navbar_activeLink__15t2E"}},2:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o}));var n=a(4),c={error:"",isFetching:!1},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_ERROR":return Object(n.a)(Object(n.a)({},e),{},{error:t.error});case"REQUEST_IS_FETCHING":return Object(n.a)(Object(n.a)({},e),{},{isFetching:t.isFetching});default:return e}},l=function(e){return{type:"REQUEST_ERROR",error:e}},o=function(e){return{type:"REQUEST_IS_FETCHING",isFetching:e}}},29:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(17),c={login:function(e){return n.a.post("auth/login",e)},authMe:function(){return n.a.post("auth/me")},logout:function(){return n.a.delete("auth/me")},forgot:function(e){return n.a.post("auth/forgot",e)},sendNewPassword:function(e){return n.a.post("auth/set-new-password",e)},registration:function(e){return n.a.post("auth/register",e)}}},41:function(e,t,a){e.exports={label:"Input_label__jOF-3",error:"Input_error__39qKP",errorMessage:"Input_errorMessage__3ysst",showPassword:"Input_showPassword__2oNMr",input:"Input_input__1VWGP"}},46:function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(43),l=a(109),o=a(33);r.c.add(l.a);var i=function(e,t){var a={prefix:t||"fas",iconName:e};return Object(r.a)(a)},u={SignInAlt:function(){return c.a.createElement(o.a,{icon:i("sign-in-alt")})},SignOutAlt:function(){return c.a.createElement(o.a,{icon:i("sign-out-alt")})},Key:function(){return c.a.createElement(o.a,{icon:i("key")})},Lock:function(){return c.a.createElement(o.a,{icon:i("lock")})},Error:function(){return c.a.createElement(o.a,{icon:i("exclamation-circle")})},Eye:function(){return c.a.createElement(o.a,{icon:i("eye")})},EyeSlash:function(){return c.a.createElement(o.a,{icon:i("eye-slash")})},SearchLocation:function(){return c.a.createElement(o.a,{icon:i("search-location")})}};t.a=u},5:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"g",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return u}));var n="/login",c="/set-new-password/:token?",r="/profile",l="/registration",o="/restore-password",i="/cards/:cardId?",u="/packs"},61:function(e,t,a){e.exports={container:"Login_container__1dhzn",formItem:"Login_formItem__1I2Ut",subLinks:"Login_subLinks__3-Xeg"}},62:function(e,t,a){e.exports={container:"Cards_container__3jJh8",table:"Cards_table__1OEYJ",tableRow:"Cards_tableRow__nwf7S",tableHeader:"Cards_tableHeader__1Rk_X"}},63:function(e,t,a){e.exports={container:"Packs_container__2Uv5c",table:"Packs_table__1SSVS",tableRow:"Packs_tableRow__1yRlX",tableHeader:"Packs_tableHeader__kNgj8"}},64:function(e,t,a){"use strict";var n=a(57),c=a(80),r=a(0),l=a.n(r),o=a(41),i=a.n(o),u=a(46);t.a=l.a.memo((function(e){var t=l.a.useState(!1),a=Object(c.a)(t,2),r=a[0],o=a[1],s=function(){o((function(e){return!e}))},m=e.labelTitle,d=e.error,b=Object(n.a)(e,["labelTitle","error"]),f="password"!==e.type||r?"text":"password";return l.a.createElement("label",{className:i.a.label},m&&l.a.createElement("span",{className:i.a.label},m),l.a.createElement("input",Object.assign({},b,{type:f,className:"".concat(i.a.input," ").concat(e.className)})),"password"===f&&l.a.createElement("div",{className:i.a.showPassword,onClick:s},u.a.Eye()),r&&l.a.createElement("div",{className:i.a.showPassword,onClick:s},u.a.EyeSlash()),d&&l.a.createElement("div",{className:i.a.error},u.a.Error(),l.a.createElement("div",{className:i.a.errorMessage},d)))}))},67:function(e,t,a){e.exports={label:"Checkbox_label__1q_k8",checkbox:"Checkbox_checkbox__2d-7_",customCheckbox:"Checkbox_customCheckbox__KijXE"}},89:function(e,t,a){e.exports={header:"Header_header__Wf4ao",container:"Header_container__38qBT"}},90:function(e,t,a){e.exports={wrapper:"Preloader_wrapper__SnQP1",img:"Preloader_img__qADR8"}}},[[115,1,2]]]);
//# sourceMappingURL=main.c9687737.chunk.js.map